android_backup() {
  local package="$1"
  adb backup -f ~/Documents/adb_backup/GMBackup.ab -n oapk $package
}

g_files_modified_by() {
  local name="$1"
  git log --pretty="%H" --author=$name | while read commit_hash; do git show --oneline --name-only $commit_hash | tail -n+2; done | sort | uniq
}

gm_start_activitiy() {
  local activity="$1"
  adb shell am start -n com.greenmile.android/com.greenmile.android.activity.$activity &>-
}

start_genymotion_screen() {
  command=$1
  echo "Quiting older session on 'Genymotion_Screen'"
  quit_screen_session "Genymotion_Screen"
  exec_in_screen "Genymotion_Screen" $command
}

exec_in_screen() {
  screen_name=$1; screen_command=$2
  screen -dmS $screen_name zsh; screen -S $screen_name -X stuff "$screen_command\n";
}

quit_screen_session() {
  session_name=$1
  screen -S "$session_name" -X quit
}

gcf() {
      git checkout feature/$1
}

gch() {
      git checkout hotfix/$1
}

gm_uninstall_all() {
  info 'Available Devices'
  adb devices

  info 'Uninstalling GM Driver Integration Example'
  adb uninstall integration.greenmile.com.gm_driver_integration

  info 'Uninstalling GM Driver JS'
  adb uninstall com.greenmile.driver

  info 'Uninstalling GM Manager'
  adb uninstall com.greenmile.manager

  info 'Uninstalling GM Updater'
  adb uninstall com.greenmile.updater

  info 'Uninstalling GM Driver'
  adb uninstall com.greenmile.android

  info 'Deleting GreenMile folder from sdcard'
  adb shell rm -rf /sdcard/Greenmile/

  info 'Deleting GreenMile APK from data folder'
  rm /data/app/com.greenmile.android-1.apk

  info 'Deleting GreenMile from data folder'
  rm /data/data/com.greenmile.android

  info 'Searching for greenmile on device'
  adb shell lsof | grep greenmile

  info 'Done ;)'
}

addGoAlias() {
  alias_name=$1
  echo "alias go$alias_name=\"cd `pwd`\"" >> $HOME/MyDotFiles/.goaliases
  source $HOME/.zshrc
}

cp_ssh_key() {
  cat $HOME/.ssh/id_rsa.pub | pbcopy
}
